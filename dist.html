<html lang="en">

<head>
    <title>Skynet Playlist Builder</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
    integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
    crossorigin="anonymous">
        <style>
            *{box-sizing:border-box}body,html{margin:0;padding:0;background-color:#fff}body{height:100%;max-width:1200px;margin:0 auto;padding:20px;background-color:#eee}.line{display:block;margin-top:10px}#container{margin-top:20px}#created{display:block;clear:both;padding-top:10px;text-align:right;color:#a9a9a9}#created a{color:#a9a9a9;padding-left:5px}#player{width:70%;height:70%;display:flex;float:left;position:relative;min-height:300px;justify-content:center;background-color:#333}#title{color:#fff;padding:0 20px}#video{background:#000;width:100%}#progressBar{height:5px;width:70%;display:flex;background:#fff;border-radius:30px;overflow:hidden}#progressBar>#progress{height:100%;width:0%;background:#00a8ff}#controls{position:absolute;bottom:0;width:100%;height:10%;max-height:40px;line-height:40px;bottom:0;color:#fff;opacity:7;background:#000;padding:0 10px}#playlist{width:30%;height:70%;float:right;min-height:300px;background:#000;border-left:1px solid #fff;overflow:hidden}#playlist table{display:block;padding:0;margin:0;border:none;overflow:scroll}#playlist table tbody{display:block;width:100%}#playlist table tr{display:block;padding:10px;height:60px;line-height:40px;color:#fff;font-size:14px}tr.video{cursor:pointer}#playlist table td{display:inline-block;height:40px;line-height:40px;font-size:14px}td.video-seq{width:10%;padding:0 10px}td.video-uploading .spinner{position:relative;top:0;width:10%}td.video-uploading .spinner div{width:27px;height:27px}td.video-name{width:50%;overflow:hidden;padding-left:10px}.playing::after{position:relative;top:3px;content:'';display:inline-block;line-height:60px;margin-left:10px;width:12px;height:12px;-moz-border-radius:7.5px;-webkit-border-radius:7.5px;border-radius:7.5px;background-color:#fff}.btn{cursor:pointer;width:20px;padding:0 10px}.spinner{display:inline-block;position:absolute;top:40%;width:64px;height:64px;z-index:100000}.spinner div{box-sizing:border-box;display:block;position:absolute;width:51px;height:51px;margin:6px;border:6px solid #fff;border-radius:50%;animation:spinner 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:#fff transparent transparent transparent}.spinner div:nth-child(1){animation-delay:-.45s}.spinner div:nth-child(2){animation-delay:-.3s}.spinner div:nth-child(3){animation-delay:-.15s}@keyframes spinner{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
        </style>
</head>

<body>
    <script>
        var elemVideo, elemPlaylistItems, elemProgress, elemStart, elemLoader, btnPlay, btnPrev, btnNext, btnFullscreen, btnReset, currentVideo; reset = (e => { e.preventDefault(), currentVideo && currentVideo.classList.remove("playing"), elemVideo.pause(), elemVideo.innerHTML = "", elemVideo.load(), elemStart.textContent = "0:00" }), selectVideo = (e => { const t = "tr" == e.target.tagName.toLowerCase() ? e.target : e.target.parentNode; currentVideo && currentVideo.classList.remove("playing"), (currentVideo = t).classList.add("playing"), elemVideo.innerHTML = '<source src="https://siasky.net/' + t.dataset.skylink + '" type="video/mp4">', elemVideo.load(), btnPlay.click(), elemLoader.classList.add("spinner") }), onCanPlayVideo = (() => { elemLoader.classList.remove("spinner") }), onTimeUpdateVideo = (() => { var e = Math.floor(elemVideo.currentTime / 60), t = Math.floor(elemVideo.currentTime - 60 * e), l = e < 10 ? "0" + e : e, n = t < 10 ? "0" + t : t; elemStart.textContent = l + " : " + n }), onClickVideo = (e => { e.preventDefault(), elemVideo.paused || elemVideo.ended ? elemVideo.play() : elemVideo.pause() }), onClickPlay = (e => { if (e.preventDefault(), elemVideo.paused || elemVideo.ended) return btnPlay.childNodes[0].setAttribute("class", "fas fa-pause"), void elemVideo.play(); elemVideo.pause(), btnPlay.childNodes[0].setAttribute("class", "fas fa-play") }), onClickPrev = (e => { e.preventDefault(); let t = -1; for (let e = elemPlaylistItems.childNodes.length - 1; e > 0; e--)currentVideo == elemPlaylistItems.childNodes[e] && (t = e - 1); -1 != t && elemPlaylistItems.childNodes[t].click() }), onClickNext = (e => { e.preventDefault(); let t = -1; for (let e = 0; e < elemPlaylistItems.childNodes.length - 1; e++)currentVideo == elemPlaylistItems.childNodes[e] && (t = e + 1); -1 != t && elemPlaylistItems.childNodes[t].click() }), onClickFullscreen = (e => { e.preventDefault(); const t = ["requestFullscreen", "webkitRequestFullscreen", "mozRequestFullScreen", "msRequestFullscreen"]; for (const e of t) if (elemVideo[e]) { elemVideo[e](); break } }), window.addEventListener("DOMContentLoaded", () => { elemVideo = document.getElementById("video"), elemPlaylistItems = document.getElementById("playlist-items"); for (const e of elemPlaylistItems.childNodes) e.onclick = selectVideo; elemPlaylistTitle = document.getElementById("title"), elemProgress = document.getElementById("progress"), elemStart = document.getElementById("start"), elemLoader = document.getElementById("loader"), btnPlay = document.getElementById("btn-play"), btnPrev = document.getElementById("btn-prev"), btnNext = document.getElementById("btn-next"), btnFullscreen = document.getElementById("btn-full"), btnReset = document.getElementById("btn-reset"), elemVideo.oncanplay = onCanPlayVideo, elemVideo.ontimeupdate = onTimeUpdateVideo, elemVideo.onclick = onClickVideo, elemVideo.onended = reset, btnPlay.onclick = onClickPlay, btnPrev.onclick = onClickPrev, btnNext.onclick = onClickNext, btnFullscreen.onclick = onClickFullscreen, btnReset.onclick = reset });
    </script>
    <script>
        var elemVideoInput, elemTitleInput, elemContainer, btnGenerate, btnReset; onChangeInputVideo = (e => { for (const t of e.target.files) uploadVideo(t), addUploadingEntryToPlaylist(t.name) }), onChangeInputTitle = (e => { e.preventDefault(), elemPlaylistTitle.innerHTML = e.target.value }), uploadPlaylist = (e => { e.preventDefault(), btnReset.click(); const t = playerHTML.replace("REPLACEME", elemContainer.innerHTML); var n = new Blob([t], { type: "text/html" }), l = new FormData; l.append("file", n), fetch("https://siasky.net/api/skyfile?filename=playlist.html", { method: "POST", body: l }).then(e => e.json()).then(e => { alert("Your playlist is at https://siasky.net/" + e.skylink) }).catch(e => { console.error("Error:", e) }) }), uploadVideo = (e => { var t = new FormData; t.append("file", e), fetch("https://siasky.net/api/skyfile?filename=" + e.name, { method: "POST", body: t }).then(e => e.json()).then(t => { addVideoEntryToPlaylist(e.name, t.skylink) }).catch(e => { console.error("Error:", e) }) }), addUploadingEntryToPlaylist = (e => { const t = document.getElementById("playlist-items").childNodes.length, n = htmlToElement(`\n    <tr data-id="${e}">\n    <td class="video-seq">${t + 1}</td>\n    <td class="video-name">${e}</td>\n    <td class="video-uploading">\n        <div class="spinner"><div></div><div></div><div></div><div></div></div>\n    </td>\n    </tr>\n    `); document.getElementById("playlist-items").appendChild(n) }), addVideoEntryToPlaylist = ((e, t) => { for (const n of document.querySelectorAll("[data-id]")) if (n.dataset.id === e) { for (const e of n.childNodes) "video-uploading" == e.className && (e.innerHTML = ""); n.closest("tr").onclick = selectVideo, n.dataset.skylink = t, n.className = "video"; break } }), htmlToElement = (e => { var t = document.createElement("template"); return e = e.trim(), t.innerHTML = e, t.content.firstChild }), window.addEventListener("DOMContentLoaded", () => { elemVideoInput = document.getElementById("input-video"), elemTitleInput = document.getElementById("input-title"), elemContainer = document.getElementById("container"), elemPlaylistTitle = document.getElementById("title"), elemVideoInput.onchange = onChangeInputVideo, elemTitleInput.onkeyup = onChangeInputTitle, btnGenerate = document.getElementById("btn-generate"), btnReset = document.getElementById("btn-reset"), btnGenerate.onclick = uploadPlaylist, document.getElementById("created").innerHTML += `<a href=${window.location.href}>Skynet</a>` }); const playerHTML = '\n<html lang="en">\n<head>\n    <title>Skynet Playlist Builder</title>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"\n        integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">\n    <style type="text/css">    \n*{box-sizing:border-box}body,html{margin:0;padding:0;background-color:#fff}body{height:100%;max-width:1200px;margin:0 auto;padding:20px;background-color:#eee}.line{display:block;margin-top:10px}#container{margin-top:20px}#created{display:block;clear:both;padding-top:10px;text-align:right;color:#a9a9a9}#created a{color:#a9a9a9;padding-left:5px}#player{width:70%;height:70%;display:flex;float:left;position:relative;min-height:300px;justify-content:center;background-color:#333}#title{color:#fff;padding:0 20px}#video{background:#000;width:100%}#controls{position:absolute;bottom:0;width:100%;height:10%;max-height:40px;line-height:40px;bottom:0;color:#fff;opacity:7;background:#000;padding:0 10px}#playlist{width:30%;height:70%;float:right;min-height:300px;background:#000;border-left:1px solid #fff;overflow:hidden}#playlist table{display:block;padding:0;margin:0;border:none;overflow:scroll}#playlist table tbody{display:block;width:100%}#playlist table tr{display:block;padding:10px;height:60px;line-height:40px;color:#fff;font-size:14px}tr.video{cursor:pointer}#playlist table td{display:inline-block;height:40px;line-height:40px;font-size:14px}td.video-seq{width:10%;padding:0 10px}td.video-uploading .spinner{position:relative;top:0;width:10%}td.video-uploading .spinner div{width:27px;height:27px}td.video-name{width:50%;overflow:hidden;padding-left:10px}.playing::after{position:relative;top:3px;content:\'\';display:inline-block;line-height:60px;margin-left:10px;width:12px;height:12px;-moz-border-radius:7.5px;-webkit-border-radius:7.5px;border-radius:7.5px;background-color:#fff}.btn{cursor:pointer;width:20px;padding:0 10px}.spinner{display:inline-block;position:absolute;top:40%;width:64px;height:64px;z-index:100000}.spinner div{box-sizing:border-box;display:block;position:absolute;width:51px;height:51px;margin:6px;border:6px solid #fff;border-radius:50%;animation:spinner 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:#fff transparent transparent transparent}.spinner div:nth-child(1){animation-delay:-.45s}.spinner div:nth-child(2){animation-delay:-.3s}.spinner div:nth-child(3){animation-delay:-.15s}@keyframes spinner{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}\n    </style>\n</head>\n\n<body>\n    <script>\nvar elemVideo,elemPlaylistItems,elemProgress,elemStart,elemLoader,btnPlay,btnPrev,btnNext,btnFullscreen,btnReset,currentVideo;reset=(e=>{e.preventDefault(),currentVideo&&currentVideo.classList.remove("playing"),elemVideo.pause(),elemVideo.innerHTML="",elemVideo.load(),elemStart.textContent="0:00"}),selectVideo=(e=>{const t="tr"==e.target.tagName.toLowerCase()?e.target:e.target.parentNode;currentVideo&&currentVideo.classList.remove("playing"),(currentVideo=t).classList.add("playing"),elemVideo.innerHTML=\'<source src="https://siasky.net/\'+t.dataset.skylink+\'" type="video/mp4">\',elemVideo.load(),btnPlay.click(),elemLoader.classList.add("spinner")}),onCanPlayVideo=(()=>{elemLoader.classList.remove("spinner")}),onTimeUpdateVideo=(()=>{var e=Math.floor(elemVideo.currentTime/60),t=Math.floor(elemVideo.currentTime-60*e),l=e<10?"0"+e:e,n=t<10?"0"+t:t;elemStart.textContent=l+" : "+n}),onClickVideo=(e=>{e.preventDefault(),elemVideo.paused||elemVideo.ended?elemVideo.play():elemVideo.pause()}),onClickPlay=(e=>{if(e.preventDefault(),elemVideo.paused||elemVideo.ended)return btnPlay.childNodes[0].setAttribute("class","fas fa-pause"),void elemVideo.play();elemVideo.pause(),btnPlay.childNodes[0].setAttribute("class","fas fa-play")}),onClickPrev=(e=>{e.preventDefault();let t=-1;for(let e=elemPlaylistItems.childNodes.length-1;e>0;e--)currentVideo==elemPlaylistItems.childNodes[e]&&(t=e-1);-1!=t&&elemPlaylistItems.childNodes[t].click()}),onClickNext=(e=>{e.preventDefault();let t=-1;for(let e=0;e<elemPlaylistItems.childNodes.length-1;e++)currentVideo==elemPlaylistItems.childNodes[e]&&(t=e+1);-1!=t&&elemPlaylistItems.childNodes[t].click()}),onClickFullscreen=(e=>{e.preventDefault();const t=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"];for(const e of t)if(elemVideo[e]){elemVideo[e]();break}}),window.addEventListener("DOMContentLoaded",()=>{elemVideo=document.getElementById("video"),elemPlaylistItems=document.getElementById("playlist-items");for(const e of elemPlaylistItems.childNodes)e.onclick=selectVideo;elemPlaylistTitle=document.getElementById("title"),elemProgress=document.getElementById("progress"),elemStart=document.getElementById("start"),elemLoader=document.getElementById("loader"),btnPlay=document.getElementById("btn-play"),btnPrev=document.getElementById("btn-prev"),btnNext=document.getElementById("btn-next"),btnFullscreen=document.getElementById("btn-full"),btnReset=document.getElementById("btn-reset"),elemVideo.oncanplay=onCanPlayVideo,elemVideo.ontimeupdate=onTimeUpdateVideo,elemVideo.onclick=onClickVideo,elemVideo.onended=reset,btnPlay.onclick=onClickPlay,btnPrev.onclick=onClickPrev,btnNext.onclick=onClickNext,btnFullscreen.onclick=onClickFullscreen,btnReset.onclick=reset});\n    <\/script>\n    <div id="container">REPLACEME</div>\n    </div>\n</body>\n\n</html>\n';
    </script>
    <h1>Make your own playlist</h1>
    <span class="line">
        <label>Playlist Title:</label>
        <input type="text" id="input-title" name="title">
    </span>
    <span class="line">
        <label>Upload files:</label>
        <input type="file" id="input-video" name="video" accept="video/*" multiple>
    </span>
    <span class="line">
        <label>When all files have uploaded, press </label>
        <button id="btn-generate">Generate</button>
    </span>
    <h2>Preview:</h2>
    <div id="container">
        <div id="player">
            <div id="loader">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>

            <video id='video' poster='https://siasky.net/XACDupWFlPclE6fzeiko3vJd4c3aRiXu8DcCyaDg1gWWNQ' preload>
            </video>
            <table id="controls">
                <tr>
                    <td class="btn" id="btn-prev"><i class="fa fa-step-backward" aria-hidden="true"></i></td>
                    <td class="btn" id="btn-play"><i class="fa fa-play" aria-hidden="true"></i></td>
                    <td class="btn" id="btn-next"><i class="fa fa-step-forward" aria-hidden="true"></i></td>
                    <td class="btn" id="btn-vol"><i class="fa fa-volume" aria-hidden="true"></i></td>
                    <td id="timer"><span id="start"> 0 : 00</span></td>
                    <td class="btn" id="btn-full"><i class="fa fa-expand" aria-hidden="true"></i></td>
                </tr>
            </table>
            <button id="btn-reset" style="display:none"></button>
        </div>
        <div id="playlist">
            <h1 id="title"></h1>
            <table>
                <tbody id="playlist-items"></tbody>
            </table>
        </div>
        <p id="created">Build your own playlist on</p>
    </div>
    </div>
</body>

</html>